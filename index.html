<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ุจูู ุงูุฏู</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- ุดุฑูุท ุนููู -->
    <header class="header">
        <div class="header-content">
            <h1>๐ฉธ ุจูู ุงูุฏู</h1>
            <button id="loginBtn" class="login-btn">ุฏุฎูู</button>
        </div>
    </header>

    <!-- ุงููุญุชูู ุงูุฑุฆูุณู -->
    <main class="main-content">
        <!-- ุฅุญุตุงุฆูุงุช ุณุฑูุนุฉ -->
        <div class="stats">
            <div class="stat-item">
                <span class="stat-number" id="donorsCount">0</span>
                <span class="stat-label">ูุชุจุฑุน</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="donationsCount">0</span>
                <span class="stat-label">ุชุจุฑุน</span>
            </div>
            <div class="stat-item">
                <span class="stat-number" id="vouchersCount">0</span>
                <span class="stat-label">ุดูู</span>
            </div>
        </div>

        <!-- ุงูุฃุฒุฑุงุฑ ุงูุฑุฆูุณูุฉ -->
        <div class="action-buttons">
            <button id="addDonorBtn" class="action-btn primary">
                <span class="btn-icon">๐ค</span>
                <span class="btn-text">ุฅุถุงูุฉ ูุชุจุฑุน</span>
            </button>
            
            <button id="addDonationBtn" class="action-btn success">
                <span class="btn-icon">๐ฉธ</span>
                <span class="btn-text">ุชุณุฌูู ุชุจุฑุน</span>
            </button>
            
            <button id="addVoucherBtn" class="action-btn info">
                <span class="btn-icon">๐ซ</span>
                <span class="btn-text">ุฅุตุฏุงุฑ ุดูู ุฏู</span>
            </button>
            
            <button id="donorsListBtn" class="action-btn secondary">
                <span class="btn-icon">๐ฅ</span>
                <span class="btn-text">ูุงุฆูุฉ ุงููุชุจุฑุนูู</span>
            </button>
            
            <button id="redeemVoucherBtn" class="action-btn warning">
                <span class="btn-icon">๐ฐ</span>
                <span class="btn-text">ุตุฑู ุดูู ุฏู</span>
            </button>
            
            <button id="statisticsBtn" class="action-btn stats">
                <span class="btn-icon">๐</span>
                <span class="btn-text">ุฅุญุตุงุฆูุงุช</span>
            </button>
        </div>

        <!-- ุขุฎุฑ ุงูุณุฌูุงุช -->
        <div class="recent-section">
            <h2>ุขุฎุฑ ุงูุณุฌูุงุช</h2>
            
            <div class="recent-list">
                <h3>ุขุฎุฑ ุงููุชุจุฑุนูู</h3>
                <div id="recentDonors" class="list-items">
                    <p class="empty-message">ูุง ููุฌุฏ ูุชุจุฑุนูู</p>
                </div>
            </div>

            <div class="recent-list">
                <h3>ุขุฎุฑ ุงูุชุจุฑุนุงุช</h3>
                <div id="recentDonations" class="list-items">
                    <p class="empty-message">ูุง ููุฌุฏ ุชุจุฑุนุงุช</p>
                </div>
            </div>

            <div class="recent-list">
                <h3>ุขุฎุฑ ุงูุดููุงุช</h3>
                <div id="recentVouchers" class="list-items">
                    <p class="empty-message">ูุง ููุฌุฏ ุดููุงุช</p>
                </div>
            </div>
        </div>
    </main>

    <!-- ููุงุฐุฌ ุงูุฅุฏุฎุงู (ูุฎููุฉ ูู ุงูุจุฏุงูุฉ) -->
    
    <!-- ูููุฐุฌ ุฅุถุงูุฉ ูุชุจุฑุน -->
    <div id="addDonorModal" class="modal">
        <div class="modal-content">
            <h2>ุฅุถุงูุฉ ูุชุจุฑุน ุฌุฏูุฏ</h2>
            <form id="addDonorForm">
                <input type="text" id="donorName" placeholder="ุงูุงุณู ุงููุงูู" required>
                <input type="tel" id="donorPhone" placeholder="ุฑูู ุงููุงุชู" required>
                <select id="donorBloodType" required>
                    <option value="">ุงุฎุชุฑ ูุตููุฉ ุงูุฏู</option>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                </select>
                <textarea id="donorNotes" placeholder="ููุงุญุธุงุช ุฅุถุงููุฉ (ุงุฎุชูุงุฑู)" rows="3"></textarea>
                <div class="form-buttons">
                    <button type="submit" class="submit-btn">ุญูุธ</button>
                    <button type="button" class="cancel-btn" onclick="closeModal('addDonorModal')">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ูููุฐุฌ ุชุณุฌูู ุชุจุฑุน -->
    <div id="addDonationModal" class="modal">
        <div class="modal-content">
            <h2>ุชุณุฌูู ุชุจุฑุน ุฌุฏูุฏ</h2>
            <form id="addDonationForm">
                <div class="donor-search-container">
                    <input type="text" id="donationDonorSearch" placeholder="ุงุจุญุซ ุนู ูุชุจุฑุน ุจุงูุงุณู" required>
                    <input type="hidden" id="donationDonorId" required>
                    <div id="donationDonorResults" class="search-results" style="display: none;"></div>
                </div>
                <input type="date" id="donationDate" required>
                <input type="number" id="donationAmount" placeholder="ูููุฉ ุงูุชุจุฑุน (ูุญุฏุฉ)" min="1" required>
                <textarea id="donationNotes" placeholder="ููุงุญุธุงุช ุงูุชุจุฑุน (ุงุฎุชูุงุฑู)" rows="3"></textarea>
                <div class="form-buttons">
                    <button type="submit" class="submit-btn">ุชุณุฌูู</button>
                    <button type="button" class="cancel-btn" onclick="closeModal('addDonationModal')">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ูููุฐุฌ ุฅุตุฏุงุฑ ุดูู ุฏู -->
    <div id="addVoucherModal" class="modal">
        <div class="modal-content">
            <h2>ุฅุตุฏุงุฑ ุดูู ุฏู ุฌุฏูุฏ</h2>
            <form id="addVoucherForm">
                <div class="donor-search-container">
                    <input type="text" id="voucherDonorSearch" placeholder="ุงุจุญุซ ุนู ูุชุจุฑุน ุจุงูุงุณู" required>
                    <input type="hidden" id="voucherDonorId" required>
                    <div id="voucherDonorResults" class="search-results" style="display: none;"></div>
                </div>
                <input type="number" id="voucherAmount" placeholder="ุนุฏุฏ ุงููุญุฏุงุช" min="1" required>
                <textarea id="voucherNotes" placeholder="ููุงุญุธุงุช ุงูุดูู (ุงุฎุชูุงุฑู)" rows="3"></textarea>
                <div class="form-buttons">
                    <button type="submit" class="submit-btn">ุฅุตุฏุงุฑ</button>
                    <button type="button" class="cancel-btn" onclick="closeModal('addVoucherModal')">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ูููุฐุฌ ูุงุฆูุฉ ุงููุชุจุฑุนูู -->
    <div id="donorsListModal" class="modal">
        <div class="modal-content modal-large">
            <h2>ูุงุฆูุฉ ุงููุชุจุฑุนูู</h2>
            
            <!-- ุฎูุงุฑุงุช ุงูููุชุฑุฉ -->
            <div class="filter-section">
                <div class="filter-row">
                    <input type="text" id="searchDonors" placeholder="ุงุจุญุซ ุนู ูุชุจุฑุน ุจุงูุงุณู ุฃู ุงููุงุชู">
                </div>
                <div class="filter-row">
                    <select id="bloodTypeFilter">
                        <option value="">ุฌููุน ูุตุงุฆู ุงูุฏู</option>
                        <option value="A+">A+</option>
                        <option value="A-">A-</option>
                        <option value="B+">B+</option>
                        <option value="B-">B-</option>
                        <option value="O+">O+</option>
                        <option value="O-">O-</option>
                        <option value="AB+">AB+</option>
                        <option value="AB-">AB-</option>
                    </select>
                    
                    <select id="eligibilityFilter">
                        <option value="all">ุฌููุน ุงููุชุจุฑุนูู</option>
                        <option value="eligible">ูุชุงุญูู ููุชุจุฑุน</option>
                        <option value="not-eligible">ุบูุฑ ูุชุงุญูู ููุชุจุฑุน</option>
                    </select>
                    
                    <button id="clearFilters" class="clear-filters-btn">ูุณุญ ุงูููุงุชุฑ</button>
                </div>
            </div>
            
            <div id="donorsList" class="donors-list">
                <p class="empty-message">ุฌุงุฑู ุงูุชุญููู...</p>
            </div>
            <div class="form-buttons">
                <button type="button" class="cancel-btn" onclick="closeModal('donorsListModal')">ุฅุบูุงู</button>
            </div>
        </div>
    </div>

    <!-- ูููุฐุฌ ุตุฑู ุดูู ุงูุฏู -->
    <div id="redeemVoucherModal" class="modal">
        <div class="modal-content">
            <h2>ุตุฑู ุดูู ุงูุฏู</h2>
            <form id="redeemVoucherForm">
                <select id="voucherSelect" required>
                    <option value="">ุงุฎุชุฑ ุงูุดูู ุงููุฑุงุฏ ุตุฑูู</option>
                </select>
                <input type="date" id="redemptionDate" required>
                <div id="voucherInfo" class="voucher-info" style="display: none;">
                    <h3>ุจูุงูุงุช ุงูุดูู</h3>
                    <div id="voucherDetails"></div>
                </div>
                <input type="text" id="beneficiaryName" placeholder="ุงุณู ุงููุณุชููุฏ" required>
                <input type="text" id="redemptionPurpose" placeholder="ุงูุบุฑุถ ูู ุงูุตุฑู" required>
                <textarea id="redemptionNotes" placeholder="ููุงุญุธุงุช ุงูุตุฑู (ุงุฎุชูุงุฑู)" rows="3"></textarea>
                <div class="form-buttons">
                    <button type="submit" class="submit-btn">ุตุฑู ุงูุดูู</button>
                    <button type="button" class="cancel-btn" onclick="closeModal('redeemVoucherModal')">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ูููุฐุฌ ุชุนุฏูู ูุชุจุฑุน -->
    <div id="editDonorModal" class="modal">
        <div class="modal-content">
            <h2>ุชุนุฏูู ุจูุงูุงุช ุงููุชุจุฑุน</h2>
            <form id="editDonorForm">
                <input type="hidden" id="editDonorId">
                <input type="text" id="editDonorName" placeholder="ุงูุงุณู ุงููุงูู" required>
                <input type="tel" id="editDonorPhone" placeholder="ุฑูู ุงููุงุชู" required>
                <select id="editDonorBloodType" required>
                    <option value="">ุงุฎุชุฑ ูุตููุฉ ุงูุฏู</option>
                    <option value="A+">A+</option>
                    <option value="A-">A-</option>
                    <option value="B+">B+</option>
                    <option value="B-">B-</option>
                    <option value="O+">O+</option>
                    <option value="O-">O-</option>
                    <option value="AB+">AB+</option>
                    <option value="AB-">AB-</option>
                </select>
                <div class="form-buttons">
                    <button type="submit" class="submit-btn">ุชุญุฏูุซ</button>
                    <button type="button" class="cancel-btn" onclick="closeModal('editDonorModal')">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ูููุฐุฌ ุชุนุฏูู ุชุจุฑุน -->
    <div id="editDonationModal" class="modal">
        <div class="modal-content">
            <h2>ุชุนุฏูู ุจูุงูุงุช ุงูุชุจุฑุน</h2>
            <form id="editDonationForm">
                <input type="hidden" id="editDonationId">
                <select id="editDonationDonor" required>
                    <option value="">ุงุฎุชุฑ ุงููุชุจุฑุน</option>
                </select>
                <input type="number" id="editDonationAmount" placeholder="ูููุฉ ุงูุชุจุฑุน (ูุญุฏุฉ)" min="1" required>
                <div class="form-buttons">
                    <button type="submit" class="submit-btn">ุชุญุฏูุซ</button>
                    <button type="button" class="cancel-btn" onclick="closeModal('editDonationModal')">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ูููุฐุฌ ุงูุฅุญุตุงุฆูุงุช -->
    <div id="statisticsModal" class="modal">
        <div class="modal-content modal-large">
            <h2>ุงูุฅุญุตุงุฆูุงุช ูุงูุชูุงุฑูุฑ</h2>
            
            <!-- ุฎูุงุฑุงุช ุงูููุชุฑุฉ -->
            <div class="filter-section">
                <div class="filter-row">
                    <select id="statsType">
                        <option value="overview">ูุธุฑุฉ ุนุงูุฉ</option>
                        <option value="donors">ุฅุญุตุงุฆูุงุช ุงููุชุจุฑุนูู</option>
                        <option value="donations">ุฅุญุตุงุฆูุงุช ุงูุชุจุฑุนุงุช</option>
                        <option value="vouchers">ุฅุญุตุงุฆูุงุช ุงูุดููุงุช</option>
                        <option value="bloodTypes">ุชูุฒูุน ูุตุงุฆู ุงูุฏู</option>
                        <option value="namesList">ูุดู ุจุงูุฃุณูุงุก</option>
                        <option value="donorStats">ุฅุญุตุงุฆูุงุช ูุชุจุฑุน ูุญุฏุฏ</option>
                    </select>
                    
                    <select id="statsPeriod">
                        <option value="all">ุฌููุน ุงููุชุฑุงุช</option>
                        <option value="today">ุงูููู</option>
                        <option value="week">ูุฐุง ุงูุฃุณุจูุน</option>
                        <option value="month">ูุฐุง ุงูุดูุฑ</option>
                        <option value="year">ูุฐุง ุงูุนุงู</option>
                    </select>
                    
                    <select id="namesListType" style="display: none;">
                        <option value="all">ุฌููุน ุงูุณุฌูุงุช</option>
                        <option value="donors">ุงููุชุจุฑุนูู ููุท</option>
                        <option value="donations">ุงูุชุจุฑุนุงุช ููุท</option>
                        <option value="vouchers">ุงูุดููุงุช ููุท</option>
                        <option value="redeemedVouchers">ุงูุดููุงุช ุงููุตุฑููุฉ ููุท</option>
                    </select>
                    
                    <div id="donorSearchSection" style="display: none;" class="donor-search-container">
                        <input type="text" id="donorStatsSearch" placeholder="ุงุจุญุซ ุนู ูุชุจุฑุน ุจุงูุฅุณู">
                        <input type="hidden" id="donorStatsId">
                        <div id="donorStatsResults" class="search-results" style="display: none;"></div>
                    </div>
                    
                    <input type="date" id="statsStartDate" placeholder="ูู ุชุงุฑูุฎ">
                    <input type="date" id="statsEndDate" placeholder="ุฅูู ุชุงุฑูุฎ">
                </div>
                <div class="filter-row">
                    <button id="generateStats" class="submit-btn">ุชูููุฏ ุงูุฅุญุตุงุฆูุงุช</button>
                    <button id="printStats" class="print-btn">๐จ๏ธ ุทุจุงุนุฉ</button>
                    <button id="clearStats" class="clear-filters-btn">ูุณุญ ุงูููุงุชุฑ</button>
                </div>
            </div>
            
            <!-- ุนุฑุถ ุงูุฅุญุตุงุฆูุงุช -->
            <div id="statisticsContent" class="statistics-content">
                <div class="stats-loading">
                    <p>ูุฑุฌู ุงุฎุชูุงุฑ ุงูููุงุชุฑ ูุถุบุท "ุชูููุฏ ุงูุฅุญุตุงุฆูุงุช"</p>
                </div>
            </div>
            
            <div class="form-buttons">
                <button type="button" class="cancel-btn" onclick="closeModal('statisticsModal')">ุฅุบูุงู</button>
            </div>
        </div>
    </div>
    <div id="editVoucherModal" class="modal">
        <div class="modal-content">
            <h2>ุชุนุฏูู ุจูุงูุงุช ุดูู ุงูุฏู</h2>
            <form id="editVoucherForm">
                <input type="hidden" id="editVoucherId">
                <select id="editVoucherDonor" required>
                    <option value="">ุงุฎุชุฑ ุงููุชุจุฑุน</option>
                </select>
                <input type="number" id="editVoucherAmount" placeholder="ุนุฏุฏ ุงููุญุฏุงุช" min="1" required>
                <div class="form-buttons">
                    <button type="submit" class="submit-btn">ุชุญุฏูุซ</button>
                    <button type="button" class="cancel-btn" onclick="closeModal('editVoucherModal')">ุฅูุบุงุก</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ูููุฐุฌ ุชุณุฌูู ุงูุฏุฎูู -->
    <div id="loginModal" class="modal">
        <div class="modal-content">
            <h2>ุชุณุฌูู ุงูุฏุฎูู</h2>
            <form id="loginForm">
                <input type="text" id="username" placeholder="ุงุณู ุงููุณุชุฎุฏู" required>
                <input type="password" id="password" placeholder="ูููุฉ ุงููุฑูุฑ" required>
                <div class="form-buttons">
                    <button type="submit" class="submit-btn">ุฏุฎูู</button>
                </div>
            </form>
        </div>
    </div>

    <!-- ุฑุณุงุฆู ุงูุชูุจูู -->
    <div id="notification" class="notification"></div>

    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    
    <!-- ูููุงุช ุงููุดุฑูุน -->
    <script src="firebase-config.js"></script>
    <script src="script.js"></script>
</body>
</html>
